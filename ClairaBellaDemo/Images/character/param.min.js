function GetParams(){var e=[],t=[];if(document.defaultView.frameElement)for(var a=document.defaultView.frameElement.getElementsByTagName("param"),r=0,l=a.length;l>r;r++){var n=(f=a[r]).getAttribute("name"),i=f.getAttribute("value");t[n]=i}var s=document.defaultView.location.href;if(-1!=s.indexOf("?"))for(var u=s.split("?")[1].split(/&|;/),m=0,o=u.length;o>m;m++){var f=u[m],d=f.split("="),n=unescape(d[0]),i=unescape(d[1]);t[n]=i}SetElementValues(t,e)}function GetValue(e,t){var a=e.split(")"),r=a[0].replace("param(",""),l=null;a[1]&&(l=a[1].replace(/^\s\s*/,"").replace(/\s\s*$/,""));var n=t[r];return n||(n=l),n}function SetElementValues(e,t){for(var a=[],r=document.documentElement.getElementsByTagName("*"),l=0,n=r.length;n>l;l++){var i=r[l];"use"!=i.localName?SetParamValues(i,e):(o=EmulateShadowTree(i,e,t,l))&&a.push([i,o])}for(var s=0,u=a.length;u>s;s++){var m=a[s][0],o=a[s][1];m.setAttribute("display","none"),m.nextSibling?m.parentNode.insertBefore(o,m.nextSibling):m.parentNode.appendChild(o)}}function SetParamValues(e,t,a){for(var r=0,l=e.attributes.length;l>r;r++){var n=e.attributes[r];if(n){var i=n.value;if(-1!=i.indexOf("param("))if("params"==n.localName){if(a)for(var s=i.split(";"),u=0,m=s.length;m>u;u++){var o=s[u].split(":"),f=o[0],d=GetValue(o[1],t),v=null;"href"!=f&&"xlink:href"!=f||(v=xlinkns),e.setAttributeNS(v,f,d)}}else if(null!=(d=GetValue(i,t))&&""!=d)if("content-value"==n.localName)e.replaceChild(document.createTextNode(d),e.firstChild);else{e.setAttributeNS(n.namespaceURI,n.name,d);var c=e.getAttribute("params");c?e.setAttribute("params",c+";"+n.name+":"+i):e.setAttribute("params",n.name+":"+i)}}}}function EmulateShadowTree(e,t,a,r){shadowParams=t;for(var l=!1,n=e.childNodes,i=0,s=n.length;s>i;i++){var u=n[i];if(1==u.nodeType&&"param"==u.localName){var m=u.getAttribute("name"),o=u.getAttribute("value");shadowParams[m]=o,l=!0}}var f=e.getAttribute("parameters");if(f)for(var d=f.split(";"),v=0,c=d.length;c>v;v++){var p=d[v].split(":");shadowParams[p[0]]=p[1],l=!0}if(l){var g=e.getAttributeNS(xlinkns,"href").replace("#",""),h=document.getElementById(g).cloneNode(!0);SetParamValues(h,shadowParams,!0);for(var b=document.createElementNS(svgns,"g"),N=document.createElementNS(svgns,"g"),w=0,A=e.attributes.length;A>w;w++)"content-value"!=(B=e.attributes[w]).localName&&"params"!=B.localName&&"parameters"!=B.localName&&"href"!=B.localName&&"x"!=B.localName&&"y"!=B.localName&&N.setAttribute(B.name,B.value);var S=e.getAttribute("x"),x=e.getAttribute("y");b.setAttribute("transform","translate("+S+","+x+")"),N.appendChild(h),b.appendChild(N);for(var E=h.getElementsByTagName("*"),V=0,P=E.length;P>V;V++){var y=E[V];SetParamValues(y,shadowParams,!0);for(var T=0,k=y.attributes.length;k>T;T++){var B=y.attributes[T],C=B.value;if("id"==B.localName&&(y.setAttribute(B.name,C+"__"+r),a[C]=C+"__"+r),-1!=C.indexOf("url(#"))for(uid in a)-1!=C.indexOf("url(#"+uid+")")&&y.setAttributeNS(B.namespaceURI,B.name,"url(#"+a[uid]+")")}}return b}return null}var svgns="http://www.w3.org/2000/svg",xlinkns="http://www.w3.org/1999/xlink";GetParams();